<main class="container">
  <h1>Dashboard</h1>

  <div class="date">
    <p>{{ currentDate | date:'fullDate' }}</p>
    <p>{{ currentDate | date:'shortTime' }}</p>
  </div>

  <div class="insights">

    <!-- start selling -->
    <div class="sales card">
      <span class="material-symbols-sharp">trending_up</span>
      <div class="middle">
        <div class="left">
          <h3>Total de Vendas</h3>
          <h1>{{ totalSales | currency }}</h1>
        </div>
        <div class="progress">
          <svg>
            <circle r="30" cy="40" cx="40" [attr.stroke-dashoffset]="calculateOffset(totalSales)"></circle>
          </svg>
          <div class="number">
            <p>{{ (totalSales / salesTarget * 100) | number:'1.0-0' }}%</p>
          </div>
        </div>
      </div>
    </div>
    <!-- end selling -->

    <!-- start expenses -->
    <div class="expenses card">
      <span class="material-symbols-sharp">local_mall</span>
      <div class="middle">
        <div class="left">
          <h3>Total Expenses</h3>
          <h1>{{ totalExpenses | currency }}</h1>
        </div>
        <div class="progress">
          <svg>
            <circle r="30" cy="40" cx="40" [attr.stroke-dashoffset]="calculateOffset(totalExpenses)"></circle>
          </svg>
          <div class="number">
            <p>{{ (totalExpenses / expensesTarget * 100) | number:'1.0-0' }}%</p>
          </div>
        </div>
      </div>
      <small>Last 24 Hours</small>
    </div>
    <!-- end expenses -->

    <!-- start income -->
    <div class="income card">
      <span class="material-symbols-sharp">stacked_line_chart</span>
      <div class="middle">
        <div class="left">
          <h3>Total Products</h3>
          <h1>{{ totalProducts }}</h1>
        </div>
        <div class="progress">
          <svg>
            <circle r="30" cy="40" cx="40" [attr.stroke-dashoffset]="calculateOffset(totalProducts)"></circle>
          </svg>
          <div class="number">
            <p>{{ (totalProducts / productsTarget * 100) | number:'1.0-0' }}%</p>
          </div>
        </div>
      </div>
      <small>Funcionamento 24 Hours</small>
    </div>
    <!-- end income -->

  </div>
  <!-- end insights -->

  <div class="recent_order">
    <h2>Recent Orders</h2>
    <table >
      <!-- Cabeçalho da tabela -->
      <thead>
        <tr>
          <th>Produto</th>
          <th>Marca</th>
          <th>Categoria</th>
          <th>Cliente</th>
          <th>Funcionário</th>
          <th>Detalhes</th>
        </tr>
      </thead>
      <!-- Corpo da tabela com os dados dos pedidos -->
      <tbody>
        <tr *ngFor="let order of recentOrders">
          <td>{{ order.produto }}</td>
          <td>{{ order.marca }}</td>
          <td>{{ order.categoria }}</td>
          <td class="warning">{{ order.cliente }}</td>
          <td class="primary"></td>
          <td class="details">
            <!-- Botão para exibir detalhes -->
            <button (click)="showDetails(order)">Detalhes</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal para exibir detalhes -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-content">
      <span class="close" (click)="hideDetails()">&times;</span>
      <h3>Detalhes do Pedido</h3>
      <table>
        <tr>
          <td><strong>Cliente:</strong></td>
          <td>{{ selectedOrder?.cliente }}</td>
        </tr>
        <tr>
          <td><strong>Funcionário:</strong></td>
          <td>{{ selectedOrder?.funcionario }}</td>
        </tr>
      </table>
    </div>
  </div>

</main>
